# ValueMEM 设计文档

## 目标
构建面向智能体的价值驱动记忆系统，在统一图谱内完成逻辑分层，并保证万级记忆规模下的高价值优先检索。

## 核心流程
1. 输入文本
2. LLM 提取事实记忆
3. 同一 LLM 进行价值评分与三元组生成
4. 向量嵌入
5. Neo4j 写入，关系属性携带记忆文本与价值分数
6. 检索：高价值优先 -> 语义排序 -> 辐射扩展

## 关键模块
- `vmem/llm`：事实提取与价值评分
- `vmem/memory`：写入流水线
- `vmem/graph`：Neo4j 存储与索引管理
- `vmem/retrieval`：价值优先检索与混合排序
- `vmem/cache`：评分缓存

## 价值评估策略
ValueMEM 使用单 LLM 直接输出 [0, 1] 的价值分数，避免复杂加权。
评分隐含维度：事件显著性、稀有度、情感强度。

## 逻辑双层检索
- 第一层：向量相似度检索 + `value_score >= threshold`
- 命中后辐射扩展关联记忆以保持上下文
- 若相似度与命中数不足，回退至全量向量检索

## 扩展方向
- 向量索引：启用 Neo4j 向量索引以支持更大规模检索
- 价值演化：结合访问频次和时间衰减调整价值分数
- 多模态：接入图像/音频的记忆表示
